<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>BNK Board - Write</title>
<link rel="stylesheet" href="./assets/css/common.css">
<link rel="stylesheet" href="./assets/css/board.css">

</head>
<body>

<h1>글쓰기</h1>

<form id="writeForm">
  <div>
    <input type="text" id="title" placeholder="제목" required>
  </div>
  <div>
    <textarea id="content" placeholder="내용" rows="6" required></textarea>
  </div>
  <button type="submit">등록</button>
  <button type="button" onclick="location.href='index.html'">취소</button>
</form>

<script src="assets/js/storage.js"></script>
<script>
  document.getElementById("writeForm").addEventListener("submit", e => {
    e.preventDefault();

    const boards = StorageDB.get("BOARD", []);
    const stats  = StorageDB.get("BOARD_STAT", []);

    const now = new Date().toISOString();
    const id = StorageDB.nextId("SEQ_BOARD_ID");

    const board = {
      id,
      title: title.value,
      content: content.value,
      board_type_code: "NOTICE",
      category_code: "PENSION",
      status: "ACTIVE",
      is_public: true,
      writer_id: 1,
      created_by: 1,
      updated_by: 1,
      created_at: now,
      updated_at: now,
      version: 1
    };

    boards.push(board);
    stats.push({ board_id: id, view_count: 0, like_count: 0, comment_count: 0 });

    StorageDB.set("BOARD", boards);
    StorageDB.set("BOARD_STAT", stats);

    location.href = "index.html";
  });
</script>
<script src="./assets/js/storage.js"></script>
<script src="./assets/js/seed.js"></script>
<script src="./assets/js/util.js"></script>
<script src="./assets/js/board_write.js"></script>

</body>
</html>
