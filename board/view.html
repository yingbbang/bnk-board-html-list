<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>BNK Board - View</title>
<link rel="stylesheet" href="./assets/css/common.css">
<link rel="stylesheet" href="./assets/css/board.css">

</head>
<body>

<div class="container">
  <div class="board-view">

    <h1 class="page-title">게시글 상세</h1>

    <div class="board-view-header">
      <h2 class="title"></h2>
      <div class="meta"></div>
    </div>

    <div class="board-view-content content"></div>

    <div class="board-view-actions actions">
      <button id="btnEdit">수정</button>
      <button id="btnDelete">삭제</button>
      <button onclick="location.href='index.html'">목록</button>
    </div>

  </div>
</div>

<script>
  const id = Number(Util.qs("id"));
  const boards = StorageDB.get("BOARD", []);
  const stats  = StorageDB.get("BOARD_STAT", []);

  const board = boards.find(b => b.id === id);
  if (!board || board.status === "DELETED") {
    alert("존재하지 않는 게시글입니다.");
    location.href = "index.html";
  }


  document.getElementById("content").innerHTML = `
    <h2>${Util.escapeHtml(board.title)}</h2>
    <p>${Util.escapeHtml(board.content)}</p>
    <p>상태: ${board.status}</p>
    <p>작성일: ${Util.fmt(board.created_at)}</p>
    <p>수정일: ${Util.fmt(board.updated_at)}</p>
  `;

  function goEdit() {
    location.href = `edit.html?id=${id}`;
  }

  function softDelete() {
    if (!confirm("삭제 처리하시겠습니까?")) return;
    board.status = "DELETED";
    board.updated_at = new Date().toISOString();
    StorageDB.set("BOARD", boards);
    alert("삭제되었습니다.");
    location.href = "index.html";
  }
</script>
<script src="./assets/js/storage.js"></script>
<script src="./assets/js/seed.js"></script>
<script src="./assets/js/util.js"></script>
<script src="./assets/js/board_view.js"></script>

</body>
</html>
